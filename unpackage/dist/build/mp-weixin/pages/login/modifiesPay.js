(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/modifiesPay"],{"0746":function(e,n,t){"use strict";t.r(n);var o=t("5e02"),i=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=i.a},"4d4e":function(e,n,t){},"5e02":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("a34a"));i(t("6f97"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,n,t,o,i,s,a){try{var c=e[s](a),r=c.value}catch(u){return void t(u)}c.done?n(r):Promise.resolve(r).then(o,i)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(o,i){var a=e.apply(n,t);function c(e){s(a,o,i,c,r,"next",e)}function r(e){s(a,o,i,c,r,"throw",e)}c(void 0)}))}}var c={data:function(){return{title:"为确保您的资金安全，请验证身份重置密码",headTitle:"更改手机号码",oldPhone:"",phone:"",senphone:"",smsCord:"",modalShow:!1,validateCode:"",codeDesc:"发送验证码",preventClickCode:!1,type:1,payPwd:"",oldPassword:"",newPassword:""}},onShow:function(){this.api_getUser()},onLoad:function(e){},methods:{updatePaypwd:function(){if(this.newPassword==this.oldPassword)if(""!=this.newPassword&&""!=this.oldPassword){var n=this,t={payPwd:n.newPassword};this.$meapi.api_updatePaypwd(t).then((function(n){if(console.log("修改手机号成功",n),0==n.code){e.showToast({title:"修改成功"});setTimeout((function(){e.navigateBack({})}),500)}else e.showToast({title:n.message,icon:"none"})})).catch((function(n){console.log("api_sendCode失败",n),e.showToast({title:"发送失败",icon:"none"})}))}else e.showToast({title:"密码不能为空",icon:"none"});else e.showToast({title:"密码不匹配",icon:"none"})},api_getUser:function(){var n=this,t={id:e.getStorageSync("users").id};this.$meapi.api_getUser(t).then((function(t){if(console.log("api_getUser成功",t),0==t.code){var o=t.data.username;n.oldPhone=o.substring(0,3)+"****"+o.substring(7,11),n.senphone=o}else 5==t.code&&e.showModal({title:"登录已过期",content:"立即去登录",success:function(n){n.confirm&&e.reLaunch({url:"/pages/index/index"})}})})).catch((function(n){console.log("api_changeAlipay失败",n),e.showToast({title:"网络链接失败",icon:"none"})}))},updatePhone:function(){if(11==this.phone.length&&6==this.smsCord.length){var n=this,t={username:n.phone,smsCode:n.smsCord};this.$meapi.api_updatePhone(t).then((function(n){if(console.log("修改手机号成功",n),0==n.code){e.showToast({title:"修改成功"});setTimeout((function(){e.reLaunch({url:"/pages/login/login"})}),500)}else e.showToast({title:n.message,icon:"none"})})).catch((function(n){console.log("api_sendCode失败",n),e.showToast({title:"发送失败",icon:"none"})}))}else e.showToast({title:"输入有误",icon:"none"})},back:function(){e.navigateBack()},getCode:function(){var n=this;return a(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(11==n.senphone.length){t.next=3;break}return e.showToast({title:"发送失败",icon:"none"}),t.abrupt("return",!1);case 3:n.sendcode();case 4:case"end":return t.stop()}}),t)})))()},sendcode:function(){var n=this,t={phone:n.senphone,type:0};this.$api.api_sendCode(t).then((function(t){if(0==t.code){n.preventClickCode=!0,e.showToast({title:"验证码已发送"});var o=60,i=setInterval((function(){o>0?(o--,n.codeDesc="".concat(o,"s")):(n.codeDesc="发送验证码",n.preventClickCode=!1,clearInterval(i))}),1e3)}else e.showToast({title:"发送失败",icon:"none"})})).catch((function(n){console.log("api_sendCode失败",n),e.showToast({title:"发送失败",icon:"none"})}))}}};n.default=c}).call(this,t("543d")["default"])},6419:function(e,n,t){"use strict";(function(e){t("3335");o(t("66fd"));var n=o(t("79be"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"79be":function(e,n,t){"use strict";t.r(n);var o=t("e589"),i=t("0746");for(var s in i)"default"!==s&&function(e){t.d(n,e,(function(){return i[e]}))}(s);t("b94e");var a,c=t("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);n["default"]=r.exports},b94e:function(e,n,t){"use strict";var o=t("4d4e"),i=t.n(o);i.a},e589:function(e,n,t){"use strict";var o;t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return o}));var i=function(){var e=this,n=e.$createElement;e._self._c},s=[]}},[["6419","common/runtime","common/vendor"]]]);