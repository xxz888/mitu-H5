(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/money/repayment/sendcodes"],{"0bc5":function(e,n,a){"use strict";var o;a.d(n,"b",(function(){return t})),a.d(n,"c",(function(){return i})),a.d(n,"a",(function(){return o}));var t=function(){var e=this,n=e.$createElement;e._self._c},i=[]},3832:function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={data:function(){return{fullname:"",a:"123456",codes:"",bankname:"",cardNo:"",phone:"",billDay:"",repaymentDay:"",bankIcon:"",securityCode:"",expiredTime:"",id:"",codeDesc:"获取验证码",preventClickCode:!1,idCard:"",card:"",smsCode:"",ylhk_card:[],sendnumber:""}},onShow:function(){this.api_getUser(),this.ylhk_card=e.getStorageSync("ylhk_card"),console.log("ylhk_card ===",e.getStorageSync("ylhk_card"))},methods:{api_getUser:function(){var n=this;console.log("xxxxxxxxxxxxxxxxxxxxx",e.getStorageSync("users").id);var a={id:e.getStorageSync("users").id};this.$meapi.api_getUser(a).then((function(e){console.log("api_getUser==============成功",e.data),0==e.code&&(n.fullname=e.data.fullname,n.idCard=e.data.idcard)})).catch((function(n){console.log("api_changeAlipay失败",n),e.showToast({title:"网络链接失败",icon:"none"})}))},getCode:function(){var n=this,a={cardNo:n.ylhk_card.cardNo};n.preventClickCode||(console.log("点击了发送验证码"),n.preventClickCode=!0,this.$api.api_orbindCard(a).then((function(a){if(console.log("点击了发送验证码",a),0==a.code&&"重复签约"==a.message)n.startNewPlan();else if(0==a.code&&"重复签约"!=a.messages){n.sendnumber=a.data,console.log(" res.data===================",a.data),e.showToast({title:"验证码已发送"});var o=60,t=setInterval((function(){o>0?(o--,n.codeDesc="".concat(o,"s")):(n.codeDesc="发送验证码",n.preventClickCode=!1,clearInterval(t))}),1e3)}else e.showToast({title:a.message,icon:"none"});n.preventClickCode=!1})).catch((function(a){n.preventClickCode=!1,console.log("api_sendCode失败",a),e.showToast({title:"发送失败",icon:"none"})})))},startNewPlan:function(){var n=this;e.showLoading({title:"启动中...",mask:!0});var a={cardNo:n.ylhk_card.cardNo};this.$api.api_startNewPlan(a).then((function(n){if(e.hideLoading(),console.log("api_startNewPlan成功",n),0==n.code){e.showToast({title:"启动成功"});setTimeout((function(){e.reLaunch({url:"/pages/money/repayment"})}),500)}else e.showToast({title:n.message,icon:"none"});e.hideLoading()})).catch((function(n){console.log("api_startNewPlan失败",n),e.showToast({title:"网络链接失败",icon:"none"}),e.hideLoading()}))},bindCardConfirm:function(){var n=this,a={idCard:n.idCard,cardNo:n.ylhk_card.cardNo,smsCode:n.smsCode,bindId:n.sendnumber};this.$api.api_bindCardConfirm(a).then((function(a){console.log("余额还款确认绑卡成功",a),0==a.code?n.startNewPlan():e.showToast({title:a.message,icon:"none"})})).catch((function(n){console.log("余额还款确认绑卡失败",n),e.showToast({title:"网络链接失败",icon:"none"})}))},modifiesxyCard:function(){var n=this,a={id:n.id,cardNo:n.cardNo,phone:n.phone,expiredTime:n.expiredTime,securityCode:n.securityCode,billDay:n.billDay,repaymentDay:n.repaymentDay};this.$api.api_modifiesxyCard(a).then((function(a){if(console.log("api_getBalancePlanList成功",a),0==a.code){var o=n.uni.getStorageSync("xyCard");o.cardNo=n.cardNo,o.phone=n.phone,o.expiredTime=n.expiredTime,o.securityCode=n.securityCode,o.billDay=n.billDay,o.repaymentDay=n.repaymentDay,e.setStorageSync("xyCard",o),e.navigateBack({})}})).catch((function(n){console.log("api_getBalancePlanList失败",n),e.showToast({title:"网络链接失败",icon:"none"})}))},back:function(){e.navigateBack()}}};n.default=a}).call(this,a("543d")["default"])},4230:function(e,n,a){},9851:function(e,n,a){"use strict";var o=a("4230"),t=a.n(o);t.a},a2b0:function(e,n,a){"use strict";(function(e){a("3335");o(a("66fd"));var n=o(a("b95c"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,a("543d")["createPage"])},b95c:function(e,n,a){"use strict";a.r(n);var o=a("0bc5"),t=a("e85a");for(var i in t)"default"!==i&&function(e){a.d(n,e,(function(){return t[e]}))}(i);a("9851");var c,r=a("f0c5"),s=Object(r["a"])(t["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);n["default"]=s.exports},e85a:function(e,n,a){"use strict";a.r(n);var o=a("3832"),t=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(n,e,(function(){return o[e]}))}(i);n["default"]=t.a}},[["a2b0","common/runtime","common/vendor"]]]);