(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/money/repayment/newPlan"],{1306:function(o,n,a){"use strict";var t=a("2c2a"),e=a.n(t);e.a},"2c2a":function(o,n,a){},"43e3":function(o,n,a){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=function(){Promise.all([a.e("common/vendor"),a.e("components/pick-regions/pick-regions")]).then(function(){return resolve(a("dcad"))}.bind(null,a)).catch(a.oe)},e={data:function(){return{codeDesc:"获取验证码",modalShow:!1,ylhk_card:[],newPlans:[],headname:"计划详情",arrawayPay:[],preventClickCode:!1,idCard:"",smsCode:"",modalShow2:!1,showm:[],pay:1,planId:""}},components:{pickRegions:t},onLoad:function(n){this.getMrXyCard(),"goNewPlan"==n.type?(this.arrawayPay=o.getStorageSync("newPlans"),this.pay=1):(this.pay=2,this.planId=n.planId,this.getPlanHhasItem(n.planId))},onShow:function(){this.ylhk_card=o.getStorageSync("ylhk_card")},methods:{showmall:function(o){console.log(o),this.showm=this.arrawayPay.planItems[o],this.modalShow2=!0},getPlanHhasItem:function(n){var a=this,t={id:n};this.$api.api_getPlanHhasItem(t).then((function(n){console.log("api_orCard成功",n),0==n.code?a.arrawayPay=n.data:o.showToast({title:n.message,icon:"none"})})).catch((function(n){console.log("api_orCard失败",n),o.showToast({title:"网络链接失败",icon:"none"})}))},orTureCard:function(){var n=this,a={cardNo:n.arrawayPay.creditCardNumber};this.$api.api_orCard(a).then((function(a){console.log("api_orCard成功",a),0==a.code?n.startNewPlan():3==a.code?o.navigateTo({url:"sendcodes"}):o.showToast({title:a.message,icon:"none"})})).catch((function(n){console.log("api_orCard失败",n),o.showToast({title:"网络链接失败",icon:"none"})}))},getCode:function(){var n=this,a={cardNo:n.arrawayPay.creditCardNumber};n.preventClickCode||(console.log("点击了发送验证码"),n.preventClickCode=!0,this.$api.api_orbindCard(a).then((function(a){if(console.log("点击了发送验证码",a),0==a.code&&"重复签约"==a.message)n.modalShow2=!n.modalShow2,n.startNewPlan();else if(0==a.code){o.showToast({title:"验证码已发送"});var t=60,e=setInterval((function(){t>0?(t--,n.codeDesc="".concat(t,"s")):(n.codeDesc="发送验证码",n.preventClickCode=!1,clearInterval(e))}),1e3)}else o.showToast({title:a.message,icon:"none"});n.preventClickCode=!1})).catch((function(a){n.preventClickCode=!1,console.log("api_sendCode失败",a),o.showToast({title:"发送失败",icon:"none"})})))},bindCardConfirm:function(){var n=this,a={idCard:n.idCard,card:n.arrawayPay.creditCardNumber,smsCode:n.smsCode};this.$api.api_startNewPlan(a).then((function(a){console.log("余额还款确认绑卡成功",a),0==a.code?n.startNewPlan():o.showToast({title:a.message,icon:"none"})})).catch((function(n){console.log("余额还款确认绑卡失败",n),o.showToast({title:"网络链接失败",icon:"none"})}))},startNewPlan:function(){var n=this;o.showLoading({title:"启动中...",mask:!0});var a={cardNo:n.arrawayPay.creditCardNumber};this.$api.api_startNewPlan(a).then((function(n){if(o.hideLoading(),console.log("api_startNewPlan成功",n),0==n.code){o.showToast({title:"启动成功"});setTimeout((function(){o.reLaunch({url:"/pages/money/repayment"})}),500)}else o.showToast({title:n.message,icon:"none"});o.hideLoading()})).catch((function(n){console.log("api_startNewPlan失败",n),o.showToast({title:"网络链接失败",icon:"none"}),o.hideLoading()}))},planStop:function(){var n=this,a={id:n.planId};this.$api.api_planStop(a).then((function(n){if(console.log("api_planStop成功",n),0==n.code){o.showToast({title:"终止成功"});setTimeout((function(){o.navigateBack({})}),500)}})).catch((function(n){console.log("api_planStop失败",n),o.showToast({title:"网络链接失败",icon:"none"})}))},getMrXyCard:function(){var n=this,a={};this.$api.api_getMrXyCard(a).then((function(o){console.log("获取默认信用卡成功",o.data.idCard),0==o.code&&(n.idCard=o.data.idCard)})).catch((function(n){console.log("api_getMrXyCard失败",n),o.showToast({title:"网络链接失败",icon:"none"})}))},back:function(){o.navigateBack()},gochangeplan:function(){o.navigateTo({url:"changePlan"})},handleGetRegion:function(o){console.log(o),this.area="".concat(o[0].name).concat(o[1].name)},closesendCode:function(){this.modalShow=!this.modalShow},start:function(){o.navigateTo({url:"changePlan"})}}};n.default=e}).call(this,a("543d")["default"])},"5e52":function(o,n,a){"use strict";(function(o){a("3335");t(a("66fd"));var n=t(a("83d6"));function t(o){return o&&o.__esModule?o:{default:o}}o(n.default)}).call(this,a("543d")["createPage"])},"83d6":function(o,n,a){"use strict";a.r(n);var t=a("ec95"),e=a("a89b");for(var i in e)"default"!==i&&function(o){a.d(n,o,(function(){return e[o]}))}(i);a("1306");var c,s=a("f0c5"),r=Object(s["a"])(e["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);n["default"]=r.exports},a89b:function(o,n,a){"use strict";a.r(n);var t=a("43e3"),e=a.n(t);for(var i in t)"default"!==i&&function(o){a.d(n,o,(function(){return t[o]}))}(i);n["default"]=e.a},ec95:function(o,n,a){"use strict";var t;a.d(n,"b",(function(){return e})),a.d(n,"c",(function(){return i})),a.d(n,"a",(function(){return t}));var e=function(){var o=this,n=o.$createElement,a=(o._self._c,o.ylhk_card.cardNo.substring(o.ylhk_card.cardNo.length,o.ylhk_card.cardNo.length-4)),t=o.modalShow2&&1==o.showm.type?(.008*o.showm.amount).toFixed(2):null;o._isMounted||(o.e0=function(n){o.modalShow2=!1}),o.$mp.data=Object.assign({},{$root:{g0:a,g1:t}})},i=[]}},[["5e52","common/runtime","common/vendor"]]]);