(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/medium/sendcodes"],{"01ec":function(e,a,n){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{fullname:"",a:"123456",codes:"",bankname:"",cardNo:"",phone:"",billDay:"",repaymentDay:"",bankIcon:"",securityCode:"",expiredTime:"",id:"",codeDesc:"获取验证码",preventClickCode:!1,idCard:"",card:"",smsCode:"",ylhk_card:[],sendnumber:""}},onShow:function(){},onLoad:function(e){this.getcard(e.id)},methods:{getcard:function(a){var n={id:a,empowerToken:getApp().globalData.xjToken},o=this;this.$api.api_xyCard1(n).then((function(e){console.log("api_xyCard成功",e.data),0==e.code&&(o.fullname=e.data.fullname,o.idCard=e.data.idCard,o.cardNo=e.data.cardNo,o.phone=e.data.phone,o.expiredTime=e.data.expiredTime,o.securityCode=e.data.securityCode,o.billDay=e.data.billDay,o.repaymentDay=e.data.repaymentDay)})).catch((function(a){console.log("api_xyCard失败",a),e.showToast({title:"网络链接失败",icon:"none"})}))},getCode:function(){var a=this,n={cardNo:a.cardNo,empowerToken:getApp().globalData.xjToken};a.preventClickCode||(console.log("点击了发送验证码"),a.preventClickCode=!0,this.$api.api_orbindCard(n).then((function(n){if(console.log("点击了发送验证码",n),0==n.code&&"重复签约"==n.message)a.startNewPlan();else if(0==n.code&&"重复签约"!=n.messages){a.sendnumber=n.data,console.log(" res.data===================",n.data),e.showToast({title:"验证码已发送"});var o=60,t=setInterval((function(){o>0?(o--,a.codeDesc="".concat(o,"s")):(a.codeDesc="发送验证码",a.preventClickCode=!1,clearInterval(t))}),1e3)}else e.showToast({title:n.message,icon:"none"});a.preventClickCode=!1})).catch((function(n){a.preventClickCode=!1,console.log("api_sendCode失败",n),e.showToast({title:"发送失败",icon:"none"})})))},startNewPlan:function(){var a=this;e.showLoading({title:"启动中...",mask:!0});var n={cardNo:a.ylhk_card.cardNo,empowerToken:getApp().globalData.xjToken};this.$api.api_startNewPlan1(n).then((function(a){if(e.hideLoading(),console.log("api_startNewPlan成功",a),0==a.code){e.showToast({title:"启动成功"});setTimeout((function(){e.reLaunch({url:"/pages/medium/index"})}),500)}else e.showToast({title:a.message,icon:"none"});e.hideLoading()})).catch((function(a){console.log("api_startNewPlan失败",a),e.showToast({title:"网络链接失败",icon:"none"}),e.hideLoading()}))},bindCardConfirm:function(){var a=this,n={idCard:a.idCard,cardNo:a.cardNo,smsCode:a.smsCode,bindId:a.sendnumber,empowerToken:getApp().globalData.xjToken};this.$api.api_bindCardConfirm(n).then((function(n){console.log("余额还款确认绑卡成功",n),0==n.code?a.startNewPlan():e.showToast({title:n.message,icon:"none"})})).catch((function(a){console.log("余额还款确认绑卡失败",a),e.showToast({title:"网络链接失败",icon:"none"})}))},modifiesxyCard:function(){var a=this,n={id:a.id,cardNo:a.cardNo,phone:a.phone,expiredTime:a.expiredTime,securityCode:a.securityCode,billDay:a.billDay,repaymentDay:a.repaymentDay};this.$api.api_modifiesxyCard(n).then((function(n){if(console.log("api_getBalancePlanList成功",n),0==n.code){var o=a.uni.getStorageSync("xyCard");o.cardNo=a.cardNo,o.phone=a.phone,o.expiredTime=a.expiredTime,o.securityCode=a.securityCode,o.billDay=a.billDay,o.repaymentDay=a.repaymentDay,e.setStorageSync("xyCard",o),e.navigateBack({})}})).catch((function(a){console.log("api_getBalancePlanList失败",a),e.showToast({title:"网络链接失败",icon:"none"})}))},back:function(){e.navigateBack()}}};a.default=n}).call(this,n("543d")["default"])},"0713":function(e,a,n){},"120e":function(e,a,n){"use strict";n.r(a);var o=n("63fb"),t=n("9918");for(var i in t)"default"!==i&&function(e){n.d(a,e,(function(){return t[e]}))}(i);n("93ea");var c,d=n("f0c5"),r=Object(d["a"])(t["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);a["default"]=r.exports},"17b3":function(e,a,n){"use strict";(function(e){n("3335");o(n("66fd"));var a=o(n("120e"));function o(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,n("543d")["createPage"])},"63fb":function(e,a,n){"use strict";var o;n.d(a,"b",(function(){return t})),n.d(a,"c",(function(){return i})),n.d(a,"a",(function(){return o}));var t=function(){var e=this,a=e.$createElement;e._self._c},i=[]},"93ea":function(e,a,n){"use strict";var o=n("0713"),t=n.n(o);t.a},9918:function(e,a,n){"use strict";n.r(a);var o=n("01ec"),t=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(a,e,(function(){return o[e]}))}(i);a["default"]=t.a}},[["17b3","common/runtime","common/vendor"]]]);