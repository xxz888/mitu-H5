(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/medium/addIdCard"],{"05ed":function(e,n,o){},"3aab":function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){Promise.all([o.e("common/vendor"),o.e("components/w-compress/w-compress")]).then(function(){return resolve(o("c79e"))}.bind(null,o)).catch(o.oe)},t={components:{WCompress:a},data:function(){return{bankcard:"",array:["南京人民银行支行","北京建设银行朝阳路支行"],provinceCity:"请选择开户行地点",phone:"",users:[],name:"",cardnumber:"",zm:"https://daihuan.oss-cn-beijing.aliyuncs.com/shiming/roleCheck-zm%402x.png",fm:"https://daihuan.oss-cn-beijing.aliyuncs.com/shiming/roleCheck-fm%402x.png",i:[],chooseimgs:"",zmTure:0,fmTure:0,icCardnumber:"",bankName:"建设银行"}},onShow:function(){},methods:{bindDebitCard:function(){var n=this;e.showLoading({title:"添加中...",mask:!0});var o={fullname:n.name,bankName:n.bankName,bankcard:n.bankcard,provinceCity:n.provinceCity,phone:n.phone,empowerToken:getApp().globalData.mediumToken};n.$api.api_bindBankcard(o).then((function(n){e.hideLoading(),console.log("添加银行卡成功",n),0==n.code?e.navigateTo({url:"/pages/medium/index"}):e.showToast({title:n.message,icon:"none"})})).catch((function(n){e.hideLoading(),console.log("err=",n),e.showToast({title:"网络链接失败",icon:"none"})}))},addname:function(){var n=this,o={fullname:n.name,idcard:n.cardnumber,empowerToken:getApp().globalData.mediumToken};n.$api.api_addmynames(o).then((function(e){console.log("添加姓名成功",e),0==e.code&&n.bindDebitCard()})).catch((function(n){e.showToast({title:"网络链接失败",icon:"none"})}))},onSinngle:function(n){var o=this;this.chooseimgs=n,e.chooseImage({count:1,success:function(e){o.$refs.wCompress.start(e.tempFilePaths[0],{pixels:5e5,quality:.5,type:"png",base64:!1}).then((function(e){o.single=e,o.savePicture(e)})).catch((function(e){console.log(e)}))}})},savePicture:function(n){for(var o=n.split(","),a=atob(o[1]),t=new ArrayBuffer(a.length),c=new Uint8Array(t),i=0;i<a.length;i++)c[i]=a.charCodeAt(i);var r=new Blob([t],{type:"application/octet-stream"}),s=URL.createObjectURL(r);console.log("ugetApp().globalData.mediumToken",getApp().globalData.mediumToken);var u=this;if(1==this.chooseimgs){u.zm=s;var l={filePath:s,empowerToken:getApp().globalData.mediumToken};u.$medapi.api_ocrUploadA(l).then((function(n){var o=JSON.parse(n.data);console.log("r.code",o),0==o.code?(u.name=o.data.name,u.cardnumber=o.data.number,e.setStorageSync("cardName",o.data.name),e.setStorageSync("addIdCard",o.data.number),u.zmTure=1):e.showToast({title:"解析失败",icon:"none"})})).catch((function(n){e.showToast({title:"网络链接失败",icon:"none"})}))}else{var d={filePath:s,empowerToken:getApp().globalData.mediumToken};u.fm=s,u.$medapi.api_ocrUploadB(d).then((function(n){var o=JSON.parse(n.data);console.log("r.code",o),0==o.code?u.fmTure=1:e.showToast({title:"解析失败",icon:"none"})})).catch((function(n){e.showToast({title:"网络链接失败",icon:"none"})}))}},handleGetRegion:function(e){console.log(e),this.provinceCity="".concat(e[0].name).concat(e[1].name)},back:function(){e.navigateBack()}}};n.default=t}).call(this,o("543d")["default"])},"6c92":function(e,n,o){"use strict";o.r(n);var a=o("b012"),t=o("97d8");for(var c in t)"default"!==c&&function(e){o.d(n,e,(function(){return t[e]}))}(c);o("a706");var i,r=o("f0c5"),s=Object(r["a"])(t["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);n["default"]=s.exports},"97d8":function(e,n,o){"use strict";o.r(n);var a=o("3aab"),t=o.n(a);for(var c in a)"default"!==c&&function(e){o.d(n,e,(function(){return a[e]}))}(c);n["default"]=t.a},a3d4:function(e,n,o){"use strict";(function(e){o("3335");a(o("66fd"));var n=a(o("6c92"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])},a706:function(e,n,o){"use strict";var a=o("05ed"),t=o.n(a);t.a},b012:function(e,n,o){"use strict";o.d(n,"b",(function(){return t})),o.d(n,"c",(function(){return c})),o.d(n,"a",(function(){return a}));var a={pickRegions:function(){return Promise.all([o.e("common/vendor"),o.e("components/pick-regions/pick-regions")]).then(o.bind(null,"dcad"))},wCompress:function(){return Promise.all([o.e("common/vendor"),o.e("components/w-compress/w-compress")]).then(o.bind(null,"c79e"))}},t=function(){var e=this,n=e.$createElement;e._self._c},c=[]}},[["a3d4","common/runtime","common/vendor"]]]);