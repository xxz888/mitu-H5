(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/medium/addXyCard"],{"2ee6":function(e,n,t){"use strict";t.r(n);var a=t("6a2f"),o=t("e647");for(var c in o)"default"!==c&&function(e){t.d(n,e,(function(){return o[e]}))}(c);t("e78f");var i,r=t("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);n["default"]=l.exports},"6a2f":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return a}));var a={wCompress:function(){return Promise.all([t.e("common/vendor"),t.e("components/w-compress/w-compress")]).then(t.bind(null,"c79e"))}},o=function(){var e=this,n=e.$createElement;e._self._c},c=[]},"8e45":function(e,n,t){"use strict";(function(e){t("3335");a(t("66fd"));var n=a(t("2ee6"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"9dda":function(e,n,t){},cafc:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){Promise.all([t.e("common/vendor"),t.e("components/w-compress/w-compress")]).then(function(){return resolve(t("c79e"))}.bind(null,t)).catch(t.oe)},o={components:{WCompress:a},data:function(){return{showhb:0,bankName:"",fullName:"",bankcard:"",phone:"",expiredTime:"",securityCode:"",billDay:"",repaymentDay:""}},onShow:function(){},onLoad:function(e){this.fullName=e.name},methods:{onSinngle:function(){var n=this;e.chooseImage({count:1,success:function(e){n.$refs.wCompress.start(e.tempFilePaths[0],{pixels:2e5,quality:.5,type:"png",base64:!1}).then((function(e){n.single=e,n.savePicture(e)})).catch((function(e){console.log(e)}))}})},savePicture:function(n){for(var t=n.split(","),a=atob(t[1]),o=new ArrayBuffer(a.length),c=new Uint8Array(o),i=0;i<a.length;i++)c[i]=a.charCodeAt(i);var r=new Blob([o],{type:"application/octet-stream"}),l=URL.createObjectURL(r);console.log("url===",l);var s=this;s.camera=l;var u={filePath:l};s.$api.api_ocrUploadBankcard(u).then((function(n){var t=JSON.parse(n.data);console.log("r.code",t),0==t.code?(s.bankcard=t.data.card_number,s.bankName=t.data.bank_name):e.showToast({title:"解析失败",icon:"none"})})).catch((function(n){e.showToast({title:"网络链接失败",icon:"none"})}))},goback:function(){this.showhb=0,e.navigateBack({})},bindCard:function(){var n=this;if(n.bankcard.length<10||11!=n.phone.length||4!=n.expiredTime.length||3!=n.securityCode.length||0==n.billDay.length||0==n.repaymentDay.length)return console.log(n.bankcard.length,n.phone.length,n.expiredTime.length,n.securityCode.length,n.billDay.length,n.repaymentDay.length),void e.showToast({title:"请先完善资料",icon:"none"});var t={bankName:n.bankName,fullname:n.fullName,bankcard:n.bankcard,phone:n.phone,expiredTime:n.expiredTime,securityCode:n.securityCode,billDay:n.billDay,repaymentDay:n.repaymentDay,empowerToken:getApp().globalData.xjToken};this.$api.api_bindCard(t).then((function(n){if(console.log("api_bindCard成功",n),0==n.code){e.showToast({title:"添加成功"});setTimeout((function(){e.navigateBack({})}),500)}else e.showToast({title:n.message,icon:"none"})})).catch((function(n){console.log("api_bindCard失败",n),e.showToast({title:"网络链接失败",icon:"none"})}))},back:function(){e.navigateBack({})}}};n.default=o}).call(this,t("543d")["default"])},e647:function(e,n,t){"use strict";t.r(n);var a=t("cafc"),o=t.n(a);for(var c in a)"default"!==c&&function(e){t.d(n,e,(function(){return a[e]}))}(c);n["default"]=o.a},e78f:function(e,n,t){"use strict";var a=t("9dda"),o=t.n(a);o.a}},[["8e45","common/runtime","common/vendor"]]]);