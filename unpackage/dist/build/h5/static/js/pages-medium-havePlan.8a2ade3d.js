(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-medium-havePlan"],{"41d9":function(e,a,t){"use strict";(function(e){var n=t("4ea4");t("99af"),t("ac1f"),t("1276"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("ade3")),o=n(t("7201")),d=n(t("b9ee")),r={data:function(){var e;return e={addRate:0,addfeilu:"",ylhk_card:[],pickerTime:!1,area:"请选择消费地区",selected1:!0,selected2:!0,date:"",provinces:"请选择省份",market:"请选择市",cityCode:"",arrayProvinces:[],arrayMarket:[],price:{type:!0,data:[]},isNowDate:!0,disableBefore:!1,endDate:"",startDate:"2021-12-13",singleElection:!1,userId:"",amount:"",reservedAmount:"",executeDate:["选择日期"],tureExecuteDate:"",dayRepaymentCount:1,provinceCode:""},(0,i.default)(e,"cityCode",""),(0,i.default)(e,"area","请选择地区"),(0,i.default)(e,"numbers",["1次","2次","3次","4次"]),(0,i.default)(e,"daynumber","1次"),(0,i.default)(e,"time1",""),(0,i.default)(e,"time2",""),(0,i.default)(e,"days",10),(0,i.default)(e,"yue",0),(0,i.default)(e,"cardId",""),(0,i.default)(e,"billDay",""),(0,i.default)(e,"repaymentDay",""),(0,i.default)(e,"cardNo",""),(0,i.default)(e,"last_days",0),(0,i.default)(e,"phone",""),(0,i.default)(e,"expiredTime",""),(0,i.default)(e,"securityCode",""),e},components:{pickRegions:o.default,reserveDate:d.default},onShow:function(){this.ylhk_card=uni.getStorageSync("ylhk_card"),this.time1=this.$dataTime.dateTimeStr("m/d",0);var e=this.$dataTime.dateTimeStr("d",0);e>this.ylhk_card.repaymentDay?this.yue=this.$dataTime.dateTimeStr("m",30):this.yue=this.$dataTime.dateTimeStr("m",0),this.date=this.$dataTime.dateTimeStr("y-m-d",0),""!=this.cardId&&this.getcard(this.cardId)},onLoad:function(a){this.getcard(a.id),e.log("e.id================",a.id),this.cardId=a.id,this.getProvinces()},methods:{getcard:function(a){var t={id:a,empowerToken:getApp().globalData.xjToken},n=this;this.$api.api_xyCard1(t).then((function(a){e.log("api_xyCard成功============================",a),0==a.code&&(n.cardNo=a.data.cardNo,n.phone=a.data.phone,n.expiredTime=a.data.expiredTime,n.securityCode=a.data.securityCode,n.billDay=a.data.billDay,n.repaymentDay=a.data.repaymentDay)})).catch((function(a){e.log("api_xyCard失败",a)}))},planNewMake:function(){var a=this;if(e.log(a.provinceCode,getApp().globalData.brandId,uni.getStorageSync("users").id),e.log(a.cityCode,a.dayRepaymentCount,a.ylhk_card.cardNo),""!=a.amount&&""!=a.reservedAmount&&""!=a.provinceCode&&""!=a.cityCode)if(a.addRate>70||a.addRate<0)uni.showToast({title:"执行费率请输入0-70",icon:"none"});else{uni.showLoading({title:"定制中...",mask:!0});var t=[];t=a.selected2?{userId:uni.getStorageSync("users").id,creditCardNumber:a.ylhk_card.cardNo,amount:a.amount,reservedAmount:a.reservedAmount,brandId:getApp().globalData.brandId,notPoint:a.selected1,dayRepaymentCount:a.dayRepaymentCount,provinceCode:a.cityCode,cityCode:a.provinceCode,empowerToken:getApp().globalData.xjToken,addRate:a.addRate}:{userId:uni.getStorageSync("users").id,creditCardNumber:a.ylhk_card.cardNo,amount:a.amount,reservedAmount:a.reservedAmount,brandId:getApp().globalData.brandId,executeDate:a.tureExecuteDate,notPoint:a.selected1,dayRepaymentCount:a.dayRepaymentCount,provinceCode:a.cityCode,cityCode:a.provinceCode,empowerToken:getApp().globalData.xjToken,addRate:a.addRate},this.$api.api_planNewMake(t).then((function(t){uni.hideLoading(),e.log("api_planNewMake成功",t),0==t.code?(uni.setStorageSync("newPlans",t.data),uni.navigateTo({url:"showNewPlan?type=goNewPlan&cardId="+a.cardId})):uni.showToast({title:t.message,icon:"none"})})).catch((function(e){uni.hideLoading()}))}else uni.showToast({title:"请先完善信息",icon:"none"})},getProvinces:function(){var a=this,t={};this.$api.api_getProvinces(t).then((function(t){e.log("api_getProvinces成功",t),0==t.code&&(a.arrayProvinces=t.data)})).catch((function(a){e.log("api_getProvinces失败",a)}))},bindProvincesChange:function(e){this.provinces=this.arrayProvinces[e.detail.value].name;var a=this.arrayProvinces[e.detail.value].id;this.getMarket(a)},getMarket:function(a){var t=this;e.log("parent=",a);var n={parent:a};this.$api.api_getMarket(n).then((function(a){e.log("api_getMarket成功",a),0==a.code&&(t.arrayMarket=a.data)})).catch((function(a){e.log("api_getMarket失败",a)}))},bindMarketChange:function(e){this.market=this.arrayMarket[e.detail.value].name,this.cityCode=this.arrayMarket[e.detail.value].parent,this.provinceCode=this.arrayMarket[e.detail.value].id},changeDay:function(a){e.log("e=================",a[0].date);for(var t=[],n=[],i=0;i<a.length;i++){var o=a[i].date.split("-"),d=o[1]+"/"+o[2];t.push(d),n.push(a[i].date)}this.executeDate=t,e.log("executeDate============",t),this.tureExecuteDate=n},changeMonth:function(a){e.log(a)},budGetDay:function(){var a=this,t={creditCardNumber:a.ylhk_card.cardNo,amount:a.amount,reservedAmount:a.reservedAmount,dayRepaymentCount:a.dayRepaymentCount};this.$api.api_budGetDay(t).then((function(t){e.log("api_budGetDay成功",t),0==t.code&&(a.last_days=t.data,uni.setStorageSync("last_day",t.data))})).catch((function(a){e.log("api_budGetDay失败",a)}))},orCard:function(){var a={cardNo:"6226020034804113"};this.$api.api_orCard(a).then((function(a){e.log("api_orCard成功",a)})).catch((function(a){e.log("api_orCard失败",a)}))},gochangeplan:function(){uni.navigateTo({url:"changeCard?id="+this.cardId})},goNewPlan:function(){uni.navigateTo({url:"newPlan?type=goNewPlan"})},back:function(){uni.navigateBack()},changeDayNumber:function(a){this.daynumber=this.numbers[a.target.value],e.log("选择每日还款次数",this.numbers[a.target.value]),this.dayRepaymentCount=1*a.target.value+1,e.log("选择每日还款次数",1*a.target.value+1),this.budGetDay()},handleGetRegion:function(a){e.log(a),this.area="".concat(a[0].name).concat(a[1].name)}}};a.default=r}).call(this,t("5a52")["default"])},"43d4":function(e,a,t){"use strict";var n=t("b4e7"),i=t.n(n);i.a},"628e":function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return n}));var n={reserveDate:t("b9ee").default},i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"container"},[t("v-uni-view",{staticClass:"header"},[t("v-uni-view",{staticClass:"header-title-common"},[t("p",{on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.back.apply(void 0,arguments)}}}),t("b",[e._v("制定计划")])])],1),t("v-uni-view",{staticClass:"main-box"},[t("v-uni-view",{staticClass:"card-box"},[t("v-uni-image",{staticClass:"card-bg",attrs:{src:"/static/images/card-bg1.png"}}),t("v-uni-image",{staticClass:"logo",attrs:{src:"/static/images/banklogo/BANK_"+e.ylhk_card.bankAcronym+".png",mode:"widthFix"}}),t("h1",[t("b",[e._v(e._s(e.ylhk_card.bankName)+"（"+e._s(e.cardNo.substring(e.cardNo.length,e.cardNo.length-4))+"）"),t("a",{on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.gochangeplan.apply(void 0,arguments)}}},[e._v("编辑")])]),t("p",[e._v("账单日 每月"+e._s(e.billDay)+"日丨还款日每月"+e._s(e.repaymentDay)+"日")])])],1),t("v-uni-view",{staticClass:"plan-part"},[t("h1",[t("p",[e._v("还款总金额(元)")]),t("v-uni-input",{attrs:{type:"number",placeholder:"还款总金额"},on:{blur:function(a){arguments[0]=a=e.$handleEvent(a),e.budGetDay.apply(void 0,arguments)}},model:{value:e.amount,callback:function(a){e.amount=a},expression:"amount"}}),t("v-uni-image",{attrs:{src:"/static/images/edit@2x.png",mode:"widthFix"}})],1),t("h1",[t("p",[e._v("卡余额(元)")]),t("v-uni-input",{attrs:{type:"number",placeholder:"信用卡可用余额"},on:{blur:function(a){arguments[0]=a=e.$handleEvent(a),e.budGetDay.apply(void 0,arguments)}},model:{value:e.reservedAmount,callback:function(a){e.reservedAmount=a},expression:"reservedAmount"}}),t("v-uni-image",{attrs:{src:"/static/images/edit@2x.png",mode:"widthFix"}})],1),t("h2",[e._v("注：卡余额为当前可用余额，卡余额越大，单笔还款金额越大,还款总次数\n\t\t\t\t\t越少，还款周期越短。")]),t("v-uni-picker",{attrs:{mode:"selector",range:e.numbers},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.changeDayNumber.apply(void 0,arguments)}}},[t("h3",[t("p",[e._v("每日还款次数")]),t("p",[e._v(e._s(e.daynumber))]),t("p")])]),t("v-uni-view",{staticClass:"point-box"},[t("h4",[t("p",[e._v("是否去除小数点")]),t("b",[t("a",{class:e.selected1?"seled":"",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.selected1=!e.selected1}}}),e._v("是"),t("a",{class:e.selected1?"":"seled",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.selected1=!e.selected1}}}),e._v("否")])]),t("b",[e._v("注：去除小数点后，实际还款金额将略大于账单金额")])]),t("v-uni-picker",{attrs:{mode:"selector",range:e.arrayProvinces,"range-key":"name"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.bindProvincesChange.apply(void 0,arguments)}}},[t("h3",[t("p",[e._v("选择省份")]),t("p",[e._v(e._s(e.provinces))])])]),t("v-uni-picker",{attrs:{mode:"selector",range:e.arrayMarket,"range-key":"name"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.bindMarketChange.apply(void 0,arguments)}}},[t("h3",[t("p",[e._v("选择市")]),t("p",[e._v(e._s(e.market))])])]),t("h5",[t("a",{class:e.selected2?"seled":"",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.selected2=!e.selected2}}}),e._v("默认日期顺序还款"),t("a",{class:e.selected2?"":"seled",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.selected2=!e.selected2}}}),e._v("定制日期还款")]),e.selected2?t("h6",[t("p",[e._v("还款日期")]),t("p",[e._v(e._s(e.time1)+"-"+e._s(e.yue)+"/"+e._s(e.ylhk_card.repaymentDay))])]):t("h6",{on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.pickerTime=!0}}},[t("p",[e._v("还款日期")]),e._l(e.executeDate,(function(a,n){return t("p",[e._v(e._s(a))])}))],2),t("v-uni-view",{staticStyle:{"border-top":"1upx solid #E5E5E5","margin-bottom":"20upx"}}),t("v-uni-view",{staticClass:"feiluclass"},[t("v-uni-view",{staticClass:"v1"},[e._v("执行费率")]),t("v-uni-view",{staticClass:"v2"},[e._v("80+")]),t("v-uni-input",{attrs:{type:"number",maxlength:"2"},model:{value:e.addRate,callback:function(a){e.addRate=a},expression:"addRate"}})],1),t("h2",[e._v("注：输入20则收取用户的费率为80+20，即每一万元收取100元的手续费")])],1)],1),t("v-uni-view",{staticClass:"btn",staticStyle:{"margin-bottom":"50upx"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.planNewMake.apply(void 0,arguments)}}},[e._v("定制计划")]),e.pickerTime?t("v-uni-view",{staticClass:"btm-box"},[t("reserve-date",{attrs:{startDate:e.date,isNowDate:e.isNowDate,disableBefore:e.disableBefore,endDate:e.endDate,singleElection:e.singleElection,pickerTime:e.pickerTime,date:e.date},on:{changeDay:function(a){arguments[0]=a=e.$handleEvent(a),e.changeDay.apply(void 0,arguments)},changeMonth:function(a){arguments[0]=a=e.$handleEvent(a),e.changeMonth.apply(void 0,arguments)},"update:pickerTime":function(a){arguments[0]=a=e.$handleEvent(a),e.pickerTime=a},"update:picker-time":function(a){arguments[0]=a=e.$handleEvent(a),e.pickerTime=a}}})],1):e._e()],1)},o=[]},"9c65":function(e,a,t){"use strict";t.r(a);var n=t("628e"),i=t("d2a0");for(var o in i)"default"!==o&&function(e){t.d(a,e,(function(){return i[e]}))}(o);t("43d4");var d,r=t("f0c5"),l=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"3f170ef1",null,!1,n["a"],d);a["default"]=l.exports},b4e7:function(e,a,t){var n=t("e979");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=t("4f06").default;i("03e9768d",n,!0,{sourceMap:!1,shadowMode:!1})},d2a0:function(e,a,t){"use strict";t.r(a);var n=t("41d9"),i=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);a["default"]=i.a},e979:function(e,a,t){var n=t("24fb");a=n(!1),a.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.btm-box[data-v-3f170ef1]{position:fixed;bottom:0;width:100%;left:0}.bg-title[data-v-3f170ef1]{width:100%;height:100%;position:absolute;left:0;top:0;z-index:-1}.header[data-v-3f170ef1]{width:100%;position:relative;padding:%?30?%;padding-top:calc(0px + %?30?%);height:%?207?%;background-color:#46c7a9}.header .header-title-common[data-v-3f170ef1]{display:flex;align-items:center;width:100%;justify-content:center;position:relative;margin-top:%?50?%}.header .header-title-common b[data-v-3f170ef1]{font-size:%?48?%;font-family:PingFang SC;font-weight:700;color:#fff}.header .header-title-common p[data-v-3f170ef1]:first-child{-webkit-transform:rotate(45deg);transform:rotate(45deg);border-bottom:%?5?% solid #fff;border-left:%?5?% solid #fff;width:%?20?%;height:%?20?%;position:absolute;left:0}.header .header-title-common p[data-v-3f170ef1]:last-child{font-size:%?28?%;font-family:PingFang SC;font-weight:700;color:#fff;position:absolute;right:0}.main-box[data-v-3f170ef1]{padding:%?30?%}.main-box .card-box[data-v-3f170ef1]{display:flex;position:relative;height:%?159?%;box-shadow:0 %?8?% %?22?% %?2?% rgba(67,67,67,.13);border-radius:%?20?%;align-items:center;padding:%?20?% %?40?%}.main-box .card-box .card-bg[data-v-3f170ef1]{width:100%;height:100%;position:absolute;left:0;top:0;z-index:-1}.main-box .card-box .logo[data-v-3f170ef1]{width:%?60?%;height:%?60?%;margin-right:%?33?%}.main-box .card-box h1[data-v-3f170ef1]{flex:1}.main-box .card-box h1 b[data-v-3f170ef1]{display:flex;justify-content:space-between;font-size:%?32?%;font-family:PingFang SC;font-weight:700;color:#fff;margin-bottom:%?20?%}.main-box .card-box h1 b a[data-v-3f170ef1]{font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#fff}.main-box .card-box h1 p[data-v-3f170ef1]{font-size:%?26?%;font-family:PingFang SC;font-weight:500;color:#fff}.plan-part[data-v-3f170ef1]{width:%?690?%;margin:0 auto;background:#fff;margin-top:%?30?%;padding:0 %?20?%;box-shadow:0 %?8?% %?22?% %?2?% rgba(67,67,67,.13);border-radius:%?20?%;padding-bottom:%?30?%}.plan-part uni-input[data-v-3f170ef1]{font-size:%?27?%;font-family:PingFang SC;font-weight:500}.plan-part h1[data-v-3f170ef1]{font-size:%?27?%;font-family:PingFang SC;font-weight:500;color:#333;display:flex;padding:%?20?% 0;border-bottom:%?1?% solid #e1e1e1}.plan-part h1 uni-input[data-v-3f170ef1]{text-align:right;flex:1;margin-left:%?80?%;margin-left:auto}.plan-part h1 uni-image[data-v-3f170ef1]{width:%?20?%;margin-left:%?20?%}.plan-part h2[data-v-3f170ef1]{background:#e3fff7;border-radius:%?10?%;font-size:%?22?%;font-family:PingFang SC;font-weight:500;display:flex;justify-content:center;align-items:center;padding:%?10?%;color:#666;margin:%?20?% 0;line-height:%?30?%}.plan-part h3[data-v-3f170ef1]{font-size:%?25?%;font-family:PingFang SC;font-weight:500;color:#999;display:flex;padding:%?25?% 0;align-items:center;border-bottom:%?1?% solid #e1e1e1}.plan-part h3 p[data-v-3f170ef1]:nth-child(2){margin-left:auto}.plan-part .point-box[data-v-3f170ef1]{padding:%?20?% 0;border-bottom:%?1?% solid #e1e1e1}.plan-part .point-box h4[data-v-3f170ef1]{font-size:%?25?%;font-family:PingFang SC;font-weight:500;color:#333;display:flex;align-items:center;justify-content:space-between}.plan-part .point-box h4 b[data-v-3f170ef1]{display:flex;margin-left:auto;margin:0;padding:0;align-items:center}.plan-part .point-box h4 b a[data-v-3f170ef1]{box-sizing:border-box;width:%?25?%;height:%?25?%;border-radius:%?50?%;border:%?5?% solid #999;background-color:none;margin-left:%?40?%;margin-right:%?20?%}.plan-part .point-box h4 b .seled[data-v-3f170ef1]{background-color:#46c7a9;border:%?5?% solid #e3fff7}.plan-part .point-box b[data-v-3f170ef1]{font-size:%?22?%;font-family:PingFang SC;font-weight:500;color:#666;margin-top:%?20?%;display:block}.plan-part h5[data-v-3f170ef1]{display:flex;align-items:center;padding:%?20?% 0;color:#888;font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#666}.plan-part h5 a[data-v-3f170ef1]{box-sizing:border-box;width:%?25?%;height:%?25?%;border-radius:%?50?%;border:%?5?% solid #999;background-color:none;margin-right:%?20?%;margin-left:auto}.plan-part h5 a[data-v-3f170ef1]:first-child{margin-left:0}.plan-part h5 .seled[data-v-3f170ef1]{background-color:#46c7a9;border:%?5?% solid #e3fff7}.plan-part h6[data-v-3f170ef1]{background:#e3fff7;display:flex;justify-content:space-between;align-items:center;padding:%?20?%;font-size:%?22?%;font-family:PingFang SC;font-weight:500;color:#666;margin-bottom:%?20?%;border-radius:%?10?%}.feiluclass[data-v-3f170ef1]{display:flex}.feiluclass .v1[data-v-3f170ef1]{width:%?300?%}.feiluclass .v2[data-v-3f170ef1]{background-color:#bebebe;width:%?119?%;display:flex;justify-content:center}.feiluclass uni-input[data-v-3f170ef1]{border:%?1?% solid #bebebe}.btn[data-v-3f170ef1]{height:%?86?%;width:%?660?%;margin:0 auto;background-color:#46c7a9;display:flex;align-items:center;justify-content:center;font-size:%?34?%;font-family:PingFang SC;font-weight:700;color:#fff;border-radius:%?20?%}.btn uni-text[data-v-3f170ef1]{font-size:%?34?%;font-family:PingFang SC;font-weight:700}',""]),e.exports=a}}]);