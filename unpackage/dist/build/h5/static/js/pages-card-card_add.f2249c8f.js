(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-card-card_add"],{"2a2a":function(e,a,t){var n=t("8d20");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=t("4f06").default;i("2192f5dc",n,!0,{sourceMap:!1,shadowMode:!1})},4887:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABECAMAAAAsljJVAAAAAXNSR0IArs4c6QAAAYZQTFRFAAAAVaqqVdSqYL+/TcyzXdG5VdSqTsSxW8i2VcyqYM+vWtK0XsmuWcyzVc62Vcq1W8itWMqwWM+vVcmyVc2xWs+zVcuxWcyzVc6wV8u0Wc2xV86zWsqvWMuxWsuvWMywWM2wVs6xWcqyWMuvWc2yWM6zV8uyWc2wWcuyWMuwWc2yWM2wWMywV82xWMuxWMuyWcywWM2xWcyyWM2wWcyyV8yxWc2yWMuwV8yxWcyxV82xV8ywWcyxWM2yWMyxWMyxWMyxWcyyWcuxWcyxWM2yWM2xWMuxWMyxWM2xWcuyWMywWMyxWcyxWM2wWMuxWMyyWMyxWMyxV82wV8ywWMyxV8uyWMyxWMyxV8yyWM2xWMyxWc2xWcyxWMyyWM2xWcuxWMyxWMyxWM2xWMuwWMyxWMyyWMuxWMyxWMyxWMyxV8yxWMywWMyxWMyyWMyxWMyxWMyxWMyxWMyxWMyxWMyxWMyxWMyxWMyxWMyxV8yxWMyxWMyxWcyxWMyxWMyxWMyxWMyxWMyxI9akLwAAAIF0Uk5TAAMGCAoLDA0ODxARExQVGBwdICEkJScoKiwuLzAxNjc9Pj9AQkNJTVNUVldaW2JjZGVqa21vcHFyc3V4eXp8g4aHio2Ok5SanZ6foKGio6Wmq6yvsLKztLW2uru+v8DBwsTFxsfJy87Q0dLT1NbX3t/i5OXm6Ovs7u/w8fL5+vv8Vrp/2gAAAqdJREFUWMPd2NtXElEUwOGfWmZpSoV5V0o0svKCkpChRaV5yzQrFfKemKDmBRM1df5zH86gEDPInJl5aT/uvc63YBaz9z5Arqj+ODqsFROvMBElO4pevDTB/lT044m0+imHqvx9KKkGlZyxc0tKfaZcE8syaoNybYwYV+8eXM8qQcPsLyWfeJrTqO0M+HvTwxdW8ovXvoxzvf5AZ62K3p9RLI2ZBwB1B4rF8acOivYUy2OvCK9iQ3QTtoMN5/lLMhgbxO1g42zY82nzZM+31yKRte1zK9ndUU91MUBxtWd01yI22lGW/qaXdUQtYI992T3Ed2yWjTi1epMzYo4d02t6Y2bY4fTpXlWVPr2G5dnZS8Qd2kycnSU2Q+7L1Kwsm7ytCs3zV8n5ZjV5JynJelTgTWb6rZr2yLFL6vGJfwuf1cKSFPtYHB7MrgyKyiMZdkucbdWqtYralgTbD0DBtlbtdwEA/RKsC4A27WIbAC7j7FEJAN+0q1/FG3JkmI0CcGNfu7p/E4CoYXYagHq9r1kPwLRhVjQZtx7rztlw9FmxZbbosS0AjBhmJwFo1GMbAZg0zK4AUH6oXT0sB2DFMJsoBGBRu7oIQGHC+OvQAEBvrmtZg8Rb5hVz9kSrdiJmsVeC/SHaiV+r5he1iExjrETv6YonS6VUvx0Xh0uzlr94qaiMyw0d9XJROpeZnlPVWslZtp4asn1p0zDZl8quyw70UEqoCC6IzEKwIpULya8f3VfrRqXr+QtX2ubUbWZZ6tFblnrMrXYhbTVkdhFdbcpGm1YtWJuHajLRmiGLlvyZLkfKvNf13cIryWlsanBg4MNU7NTam45NF6j/m43ZwcbsYeMs28Eu894O9h1OO1gndvxZ4wVoT1qLHraL9uEIfAlbFtMBB3ABSjAnqJl7f9kAAAAASUVORK5CYII="},"8d20":function(e,a,t){var n=t("24fb");a=n(!1),a.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bg-title[data-v-40a5d54d]{width:100%;height:100%;position:absolute;left:0;top:0;z-index:-1}.header[data-v-40a5d54d]{width:100%;position:relative;padding:%?30?%;height:%?207?%;padding-top:calc(0px + %?30?%);min-height:%?100?%;background-color:#46c7a9}.header .header-title-common[data-v-40a5d54d]{display:flex;align-items:center;width:100%;justify-content:center;position:relative;padding-top:%?50?%}.header .header-title-common b[data-v-40a5d54d]{font-size:%?48?%;font-family:PingFang SC;font-weight:700;color:#fff}.header .header-title-common p[data-v-40a5d54d]{-webkit-transform:rotate(45deg);transform:rotate(45deg);border-bottom:%?5?% solid #fff;border-left:%?5?% solid #fff;width:%?20?%;height:%?20?%;position:absolute;left:0}h1[data-v-40a5d54d]{background:#e3fff7;display:flex;align-items:center;padding:%?30?% %?50?%;font-size:%?24?%;font-family:PingFang SC;font-weight:500;color:#333}.form-1[data-v-40a5d54d]{width:%?690?%;background:#fff;box-shadow:0 %?8?% %?22?% %?2?% rgba(67,67,67,.13);border-radius:%?20?%;padding:0 %?16?%;margin:0 auto;margin-top:%?30?%}.form-1 h2[data-v-40a5d54d]{display:flex;align-items:center;border-bottom:%?1?% solid #e1e1e1;padding:%?20?% 0;font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#333}.form-1 h2 uni-input[data-v-40a5d54d]{flex:1;font-size:%?24?%}.form-1 h2 p[data-v-40a5d54d]{width:%?170?%}.form-1 h2 .photo-box[data-v-40a5d54d]{display:flex;align-items:center;flex-direction:column;font-size:%?20?%;font-family:PingFang SC;font-weight:500;color:#999}.form-1 h2 .photo-box uni-image[data-v-40a5d54d]{width:%?43?%;height:%?34?%;margin-bottom:%?10?%}.tips[data-v-40a5d54d]{display:flex;padding:%?60?%}.tips p[data-v-40a5d54d]:first-child{width:%?40?%;font-size:%?26?%;font-family:PingFang SC;font-weight:700;color:#46c7a9}.tips p[data-v-40a5d54d]:last-child{font-size:%?26?%;font-family:PingFang SC;font-weight:400;color:#999}.btn[data-v-40a5d54d]{height:%?86?%;width:%?660?%;margin:0 auto;background-color:#46c7a9;display:flex;align-items:center;justify-content:center;font-size:%?34?%;font-family:PingFang SC;font-weight:700;color:#fff;border-radius:%?20?%}.showBox[data-v-40a5d54d]{display:flex;width:100%;height:100%;justify-content:center;align-items:center;background:rgba(0,0,0,.5);position:fixed;top:0;left:0;z-index:20}.showBox .inner[data-v-40a5d54d]{display:flex;width:80%;flex-direction:column;background:#fff;border-radius:%?20?%;overflow:hidden}.showBox .inner[data-v-40a5d54d]{display:flex;width:80%;flex-direction:column;background:#fff;border-radius:%?20?%;overflow:hidden}.showBox .center[data-v-40a5d54d]{display:flex;width:60%;flex-direction:column;background:#fff;border-radius:%?20?%;overflow:hidden}.showBox .center .showBoxContent[data-v-40a5d54d]{display:flex;width:100%;flex-direction:column}.showBox .center .showBoxContent .bookmark[data-v-40a5d54d]{width:100%}.showBox .center .btnLine[data-v-40a5d54d]{display:flex;width:100%;border-top:1px solid #eee}.showBox .center .btnLine uni-button[data-v-40a5d54d]{display:flex;width:100%;height:%?80?%;justify-content:center;align-items:center;color:#4390ea;font-size:%?32?%}',""]),e.exports=a},9925:function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return n}));var n={wCompress:t("97f5").default},i=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"header"},[n("v-uni-view",{staticClass:"header-title-common"},[n("p",{on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.back.apply(void 0,arguments)}}}),n("b",[e._v("添加信用卡")])])],1),n("h1",[e._v("信息加密处理，仅用于银行验证，请验证您本人的银行卡")]),n("v-uni-view",{staticClass:"form-1"},[n("h2",[n("p",[e._v("持卡人")]),n("v-uni-input",{attrs:{type:"text",value:e.fullName,disabled:!0}})],1),n("h2",[n("p",[e._v("卡号")]),n("v-uni-input",{attrs:{type:"number",placeholder:"请输入信用卡卡号"},model:{value:e.bankcard,callback:function(a){e.bankcard=a},expression:"bankcard"}}),n("v-uni-view",{staticClass:"photo-box",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onSinngle.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:t("4887"),mode:""}}),e._v("拍照识别")],1)],1),n("h2",[n("p",[e._v("预留手机号")]),n("v-uni-input",{attrs:{type:"number",maxlength:"11",placeholder:"请输入信用卡银行预留手机号"},model:{value:e.phone,callback:function(a){e.phone=a},expression:"phone"}})],1),n("h2",[n("p",[e._v("有效期")]),n("v-uni-input",{attrs:{type:"number",maxlength:"4",placeholder:"请输入有效期(如09/22输入0922)"},model:{value:e.expiredTime,callback:function(a){e.expiredTime=a},expression:"expiredTime"}})],1),n("h2",[n("p",[e._v("安全码")]),n("v-uni-input",{attrs:{type:"number",maxlength:"3",placeholder:"请输入安全码"},model:{value:e.securityCode,callback:function(a){e.securityCode=a},expression:"securityCode"}})],1),n("h2",[n("p",[e._v("账单日")]),n("v-uni-input",{attrs:{type:"number",maxlength:"2",placeholder:"请输入账单日"},model:{value:e.billDay,callback:function(a){e.billDay=a},expression:"billDay"}})],1),n("h2",[n("p",[e._v("还款日")]),n("v-uni-input",{attrs:{type:"number",maxlength:"2",placeholder:"请输入还款日"},model:{value:e.repaymentDay,callback:function(a){e.repaymentDay=a},expression:"repaymentDay"}})],1)]),n("v-uni-view",{staticClass:"tips"},[n("p",[e._v("注：")]),n("p",[e._v("1.同一张卡每天只能绑定五次，如有失败请第二天尝试 2.暂不支持借贷合—卡制定还款计划")])]),n("v-uni-view",{staticClass:"btn",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.bindCard.apply(void 0,arguments)}}},[e._v("确定添加")]),n("w-compress",{ref:"wCompress"}),e.showhb?n("v-uni-view",{staticClass:"showBox",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.goback.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"center"},[n("v-uni-view",{staticClass:"showBoxContent"},[n("v-uni-image",{staticClass:"bookmark",attrs:{mode:"widthFix",src:"https://daihuan.oss-cn-beijing.aliyuncs.com/tanchuang/hb.png"}})],1)],1)],1):e._e()],1)},o=[]},c431:function(e,a,t){"use strict";var n=t("2a2a"),i=t.n(n);i.a},dbbd:function(e,a,t){"use strict";(function(e){var n=t("4ea4");t("c19f"),t("ace4"),t("d3b7"),t("ac1f"),t("3ca3"),t("1276"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("2954"),t("649e"),t("219c"),t("b39a"),t("72f7"),t("ddb0"),t("2b3d"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("97f5")),o={components:{WCompress:i.default},data:function(){return{showhb:0,bankName:"",fullName:"",bankcard:"",phone:"",expiredTime:"",securityCode:"",billDay:"",repaymentDay:""}},onShow:function(){},onLoad:function(e){this.api_getUser()},methods:{onSinngle:function(){var a=this;uni.chooseImage({count:1,success:function(t){a.$refs.wCompress.start(t.tempFilePaths[0],{pixels:1e5,quality:.8,type:"png",base64:!1}).then((function(e){a.single=e,a.savePicture(e)})).catch((function(a){e.log(a)}))}})},savePicture:function(a){for(var t=a.split(","),n=atob(t[1]),i=new ArrayBuffer(n.length),o=new Uint8Array(i),d=0;d<n.length;d++)o[d]=n.charCodeAt(d);var c=new Blob([i],{type:"application/octet-stream"}),r=URL.createObjectURL(c);e.log("url===",r);var s=this;s.camera=r;var l={filePath:r};s.$api.api_ocrUploadBankcard(l).then((function(a){var t=JSON.parse(a.data);e.log("r.code",t),0==t.code?(s.bankcard=t.data.card_number,s.bankName=t.data.bank_name):uni.showToast({title:"解析失败",icon:"none"})})).catch((function(e){}))},goback:function(){this.showhb=0,uni.navigateBack({})},api_getUser:function(){var a=this,t={id:uni.getStorageSync("users").id};this.$meapi.api_getUser(t).then((function(t){e.log("首页获取个人信息成功成功",t.data.selfLevel),0==t.code&&(a.fullName=t.data.fullname)})).catch((function(a){e.log("api_changeAlipay失败",a)}))},photo:function(){var a=this,t=this;e.log("上传图片"),uni.chooseImage({count:1,success:function(n){e.log("res.tempFilePaths[0]",n.tempFilePaths[0]);var i={filePath:n.tempFilePaths[0]};t.$api.api_ocrUploadBankcard(i).then((function(t){var n=JSON.parse(t.data);e.log("bankcard",JSON.parse(t.data)),a.bankcard=n.data.card_number,a.bankName=n.data.bank_name})).catch((function(e){}))}})},bindCard:function(){var a=this,t=this;if(t.bankcard.length<10||11!=t.phone.length||4!=t.expiredTime.length||3!=t.securityCode.length||0==t.billDay.length||0==t.repaymentDay.length)return e.log(t.bankcard.length,t.phone.length,t.expiredTime.length,t.securityCode.length,t.billDay.length,t.repaymentDay.length),void uni.showToast({title:"请先完善资料",icon:"none"});var n={bankName:t.bankName,fullname:t.fullName,bankcard:t.bankcard,phone:t.phone,expiredTime:t.expiredTime,securityCode:t.securityCode,billDay:t.billDay,repaymentDay:t.repaymentDay};this.$api.api_bindCard(n).then((function(t){if(e.log("api_bindCard成功",t),0==t.code)if("first"==t.message)a.showhb=1;else{uni.showToast({title:"添加成功"});setTimeout((function(){uni.navigateBack({})}),500)}else uni.showToast({title:t.message,icon:"none"})})).catch((function(a){e.log("api_bindCard失败",a)}))},back:function(){uni.navigateBack({})}}};a.default=o}).call(this,t("5a52")["default"])},ef87:function(e,a,t){"use strict";t.r(a);var n=t("9925"),i=t("f6fb");for(var o in i)"default"!==o&&function(e){t.d(a,e,(function(){return i[e]}))}(o);t("c431");var d,c=t("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"40a5d54d",null,!1,n["a"],d);a["default"]=r.exports},f6fb:function(e,a,t){"use strict";t.r(a);var n=t("dbbd"),i=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);a["default"]=i.a}}]);